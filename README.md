### 子应用模板 — **template-react**

### 安装依赖

```bash
npm install
或者
pnpm install
```

### 启动项目

- 启动应用后，可在本地进行调试。

```bash
npm start
```

### 项目打包

- 打包成功后，根目录下面会出现以 "[my_liteapp_id].zip" ZIP 安装包，在观云平台-轻应用市场使用上传功能可快速部署。

```bash
npm run build
```

### 项目部署

- 自动化部署，会根据 package 文件的 apiRoot 去部署对应环境下，您可以在项目的根目录中找到以应用名称命名的 ZIP 安装包。

```bash
npm run deploy
```

### 目录结构简要介绍

```
- src
    components 公共组件

    hooks  公共hook函数

    pages  业务page

    routers  路由配置

    styles 公共样式文件

    tyContext  听云函数

        - index  入口文件

    utils  公共工具、变量

        - index  通用函数

        - constants 通用常量

    App

    index.tsx 应用入口文件
-
```

## 轻应用基本信息

### 图标

如果不指定，将使用轻应用的默认图标。如果需要指定图标，请替换项目中 `public` 文件夹下的 `logo.svg` 文件。

- 仅限 svg 的图片格式，建议图片尺寸为 90\*90 像素

### 基本信息

在项目的 `package.json` 文件中可以设置轻应用的基本信息。

- 轻应用名称（cnName）

  - 中文环境的轻应用名称，必填， 默认为`我的轻应用`
  - 仅能输入中文、英文、数字，支持下划线、空格（中间）、横杠，不能包含其他特殊字符
  - 最大输入 30 个字符

- 轻应用标识（name）

  - 轻应用的唯一标识，同一应用的标识不能重复，必填，默认为创建脚手架时指定的名称
  - 仅能输入英文、数字，支持下划线、横杠
  - 最大输入 30 个字符

- 版本号（version）

  - 必填
  - 仅能输入英文、数字，支持下划线、横杠、小数点，不能包含其他特殊字符
  - 最大输入 30 个字符

- 描述信息（description）

  - 轻应用的描述信息，选填
  - 最大输入 100 个字符

- 英文环境的轻应用名称（enName）

  - 报表在英文环境下轻应用的名称，选填， 默认为轻应用标识
  - 仅能输入中文、英文、数字，支持下划线、空格（中间）、横杠，不能包含其他特殊字符
  - 最大输入 30 个字符

- 运行环境（apiRoot）

  - 观云平台的运行环境，即观云报表地址，必填
  - 示例： `<https://myguanyun.tingyun.com>` 或 `<http://10.xx.xx.23:8085>`

### package.json 的必填项

| 一级字段    | 二级字段 | 说 明                                                             | 类型   | 是否必填 | 初始值                                                   |
| ----------- | -------- | ----------------------------------------------------------------- | ------ | -------- | -------------------------------------------------------- |
| name        | -        | 1、静态资源 publicPath 2、路由的 basename 3、上传后的应用唯一标识 | string | 是       | cli 工具初始项目的会同步 `<my_liteapp_id>`               |
| version     | -        | 轻应用的版本号                                                    | string | 是       | v0.0.1                                                   |
| tingyun     | -        | 轻应用的名称配置                                                  | object | 是       | -                                                        |
| -           | cnName   | 轻应用的中文名称                                                  | string | 是       | 模板                                                     |
| -           | enName   | 轻应用的英文名称                                                  | string | 是       | cli 工具初始项目的会同步`<my_liteapp_id>`                |
| ty_config   | -        | 用于听云函数的配置信息                                            | object | 是       | -                                                        |
| -           | apiRoot  | 1、deploy 部署对应的环境 2、访问听云资源 api 的 baseUrl           | string | 是       | 默认值是`/o11y-api`, cli 工具初始项目的会拼接`<apiRoot>` |
| description | -        | 轻应用的描述                                                      | string | 是       | -                                                        |
